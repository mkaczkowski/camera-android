"use strict";var sioWebApp=angular.module("sioWebApp",["underscore","ngResource","ui.router","interact","ionic","ng-cordova","sioWebApp.config","sioWebApp.mock","sioWebApp.common","sioWebApp.navigation","sioWebApp.home","sioWebApp.friends"]);sioWebApp.config(["$stateProvider","$urlRouterProvider","loggerProvider",function(a,b,c){a.state("home",{url:"/home",templateUrl:"views/home/home.html",controller:"HomeCtrl"}).state("contact",{url:"/contact",templateUrl:"views/contact/contact.html",controller:"ContactCtrl",resolve:{loadMyModule:["$ocLazyLoad",function(a){return a.load(["sioWebApp.contact"])}]}}),b.otherwise("/home"),c.enabled(!0)}]),sioWebApp.run(["$rootScope","configuration","logger","_",function(a,b,c,d){FastClick.attach(document.body,{}),a.app=b;var e=c.getInstance("sioWebApp");e.log("This is a log"),e.info("This is a info"),e.warn("This is a warn"),e.debug("This is a debug for line {0}",[8]);var f=[10,5,100,3,1e3];e.debug(d.min(f))}]),angular.module("sioWebApp.config",[]).constant("configuration",{name:"SIO2 Backoffice",version:"SIO2 Backoffice v.1.0",copyright:"Ministerstwo Edukacji Narodowej, Szucha 25, Warszawa",restEndpoint:"",isProd:JSON.parse("true")}),angular.module("sioWebApp.home",[]),angular.module("sioWebApp.home").controller("HomeCtrl",["$scope","imageService","cameraService",function(a,b,c){a.saveCanvasToFile=function(){html2canvas([document.getElementById("draggableContainer")],{onrendered:function(a){b.saveCanvasToFile(a)}})},a.getPicture=function(){c.takePicture("pictureImg")}}]),angular.module("sioWebApp.navigation",["sioWebApp.config"]),angular.module("sioWebApp.navigation").controller("NavigationCtrl",["$scope","$location",function(a,b){a.menuItems=[{name:"Home",path:"home"},{name:"Contact",path:"contact"}],a.isActive=function(a){return b.path().substr(0,a.length)==a}}]),angular.module("sioWebApp.common",[]),angular.module("sioWebApp.common").directive("debug",["$compile",function(a){return{terminal:!0,priority:1e6,link:function(b,c){var d=c.clone();c.attr("style","color:red"),d.removeAttr("debug");var e=a(d)(b);c.after(e)}}}]);var mySharedService=angular.module("sioWebApp.common").factory("mySharedService",["$rootScope",function(a){var b={};return b.message="",b.prepForBroadcast=function(a){this.message=a,this.broadcastItem()},b.broadcastItem=function(){a.$broadcast("handleBroadcast")},b}]);angular.module("sioWebApp.common").directive("draggableItem",["mySharedService",function(a){return{restrict:"E",template:'<div class="drag-and-drop padding" style="position: absolute" ><img data-ng-src="{{src}}"><button ng-show="isSelected" ng-click="removeElement()">X</div>',replace:!0,piority:1e4,scope:{src:"@"},controller:["$scope","$element",function(a,b){a.removeElement=function(){console.log("remove"),b.remove()}}],link:function(b,c){function d(){g=1,h.style.webkitTransform=h.style.transform="scale(1)"}b.$on("handleBroadcast",function(){b.isSelected=a.message==c,b.$apply()}),interact(c.get(0)).draggable({onStart:function(a){var b=a.target;angular.element(b).hasClass("selectedDraggable")||interact.stop(a)},onmove:function(a){var b=a.target;b.x=(0|b.x)+a.dx,b.y=(0|b.y)+a.dy,b.style.webkitTransform=b.style.transform="translate("+b.x+"px, "+b.y+"px)"}}).on("dragend",function(a){console.log("dragged a distance of "+Math.sqrt(a.dx*a.dx+a.dy*a.dy)+" pixels to "+a.pageX+", "+a.pageY)}).inertia(!0).restrict({drag:"parent"});var e=0;interact(c.get(0)).gesturable({onmove:function(a){var b=c.get(0);e+=a.da,b.style.webkitTransform=b.style.transform="rotate("+e+"deg)"}});var f,g=1,h=c.get(0);interact(c.get(0)).gesturable({onstart:function(){clearTimeout(f),h.classList.remove("reset")},onmove:function(a){g*=1+a.ds,h.style.webkitTransform=h.style.transform="scale("+g+")"},onend:function(){f=setTimeout(d,1e3),h.classList.add("reset")}}),c.on("dragstart",function(a){a.preventDefault()}),c.bind("click",function(){a.prepForBroadcast(c),angular.element(".selectedDraggable").removeClass("selectedDraggable"),c.addClass("selectedDraggable")}),c.bind("touchstart",function(){c.hasClass("selectedDraggable")||(a.prepForBroadcast(c),angular.element(".selectedDraggable").removeClass("selectedDraggable"),c.addClass("selectedDraggable"))})}}}]),angular.module("sioWebApp.common").directive("carousel",["$compile",function(a){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="myCarousel" style="width: 100%;" ng-transclude></div>',link:function(b,c){angular.element(".thumb-img").bind("click",function(c){var d=angular.element(c.target).attr("src"),e=a('<draggable-item id="1" src="'+d+'"/>')(b),f=angular.element(document.getElementById("draggableContainer")),g=(f.height()-200)/2,h=(f.width()-200)/2;e.css({top:g+"px",left:h+"px"}),f.append(e)}),c.owlCarousel({singleItem:!1,lazyLoad:!0,navigation:!0,pagination:!1,items:4})}}}]),angular.module("sioWebApp.common").provider("logger",[function(){var a=!0;this.enabled=function(b){a=!!b},this.$get=["$log",function(b){var c=function(a){this.context=a};return c.getInstance=function(a){return new c(a)},c.supplant=function(a,b){return a.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})},c.getFormattedTimestamp=function(a){return c.supplant("{0}:{1}:{2}:{3}",[a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()])},c.prototype={_log:function(d,e){if(a){var f=c.getFormattedTimestamp(new Date),g="",h=[];switch(e.length){case 1:g=c.supplant("{0} - {1}: {2}",[f,this.context,e[0]]);break;case 3:h=e[2],g=c.supplant("{0} - {1}::{2}('{3}')",[f,this.context,e[0],e[1]]);break;case 2:"string"==typeof e[1]?g=c.supplant("{0} - {1}::{2}('{3}')",[f,this.context,e[0],e[1]]):(h=e[1],g=c.supplant("{0} - {1}: {2}",[f,this.context,e[0]]))}b[d].call(null,c.supplant(g,h))}},log:function(){this._log("log",arguments)},info:function(){this._log("info",arguments)},warn:function(){this._log("warn",arguments)},debug:function(){this._log("debug",arguments)},error:function(){this._log("error",arguments)}},c}]}]),angular.module("sioWebApp.common").controller("FileCtrl",["$scope","$cordovaFile",function(a,b){a.api=function(){b.checkDir(directory).then(function(){},function(){}),b.createDir(directory,!1).then(function(){},function(){}),b.checkFile(directory,file).then(function(){},function(){}),b.createFile(directory,file,!0).then(function(){},function(){}),b.removeFile(directory,file).then(function(){},function(){}),b.writeFile(directory,file).then(function(){},function(){}),b.readFile(directory,file).then(function(){},function(){}),b.downloadFile(source,filePath,!0,options).then(function(){},function(){}),b.uploadFile(server,filePath,options).then(function(){},function(){})}}]),angular.module("sioWebApp.common").factory("imageService",function(){var a={};return a.saveCanvasToFile=function(a){window.canvas2ImagePlugin.saveImageDataToLibrary(function(a){console.log(a)},function(a){console.log(a)},a)},a}),angular.module("sioWebApp.common").controller("NetworkCtrl",["$scope","$cordovaNetwork",function(a,b){b.getNetwork(),b.isOnline(),b.isOffline()}]),angular.module("sioWebApp.common").controller("NotificationCtrl",["$scope","$cordovaDialogs",function(a,b){b.alert("Wow!")}]),angular.module("sioWebApp.common").factory("cameraService",["cordovaCamera",function(){var a={};return a.takePicture=function(a){var b={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};navigator.camera.getPicture(function(b){var c=document.getElementById(a);c.src="data:image/jpeg;base64,"+b},function(a){console.error("error!!:"+a)},b)},a}]),angular.module("sioWebApp.common").controller("SharingCtrl",["$scope","$cordovaSocialSharing",function(a,b){}]),angular.module("sioWebApp.common").service("serviceUtil",["$resource","configuration",function(a,b){this.createResource=function(c,d){var e=a(b.restEndpoint+c,{},d);return this._applyHandlers(e,d)},this._applyHandlers=function(a,b){return angular.forEach(b,function(b,c){var d=c.substr(1);a[d]=function(b,d,e){return a[c](b,null,null).$promise.then(function(a){d(a)},function(a){toastr.error(a.statusText,"Błąd :: "+a.status),e&&e(a)})}}),a}}]),angular.module("sioWebApp.friends",[]),angular.module("sioWebApp.friends").controller("DashCtrl",["$scope",function(){}]),angular.module("sioWebApp.friends").controller("FriendsCtrl",["$scope","Friends",function(a,b){a.friends=b.all()}]),angular.module("sioWebApp.friends").controller("FriendDetailCtrl",["$scope","$stateParams","Friends",function(a,b,c){a.friend=c.get(b.friendId)}]),angular.module("sioWebApp.friends",[]).factory("Friends",function(){var a=[{id:0,name:"Scruff McGruff"},{id:1,name:"G.I. Joe"},{id:2,name:"Miss Frizzle"},{id:3,name:"Ash Ketchum"}];return{all:function(){return a},get:function(b){return a[b]}}}),angular.module("sioWebApp.mock",[]).run([function(){}]);